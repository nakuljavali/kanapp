<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Learn Kannada Script</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="assets/favicon.svg">
    <link rel="icon" type="image/png" href="assets/favicon.png">
    <link rel="apple-touch-icon" href="assets/apple-touch-icon.png">
    
    <!-- Existing links -->
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- Add Noto Sans Kannada font -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Kannada:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="menu-overlay" id="menuOverlay"></div>
    
    <div class="container">
        <div class="top-bar">
            <button class="icon-button menu-button" id="menuButton">
                <span class="material-icons">menu</span>
            </button>
            <div class="logo">
                <img src="assets/logo.svg" alt="KanApp" class="logo-image">
            </div>
            
            <!-- Side Menu -->
            <div class="side-menu" id="sideMenu">
                <div class="menu-header">
                    <div class="logo">
                        <img src="assets/logo.svg" alt="KanApp" class="logo-image">
                    </div>
                    <button class="icon-button" id="closeMenu">
                        <span class="material-icons">close</span>
                    </button>
                </div>
                <div class="menu-items">
                    <a href="letters.html" class="menu-item">
                        <span class="material-icons">edit</span>
                        Practice Mode
                    </a>
                    <a href="settings.html" class="menu-item">
                        <span class="material-icons">settings</span>
                        Settings
                    </a>
                </div>
            </div>
        </div>

        <div class="mode-selection">
            <div class="learning-tree">
                <!-- Level 1: Vowels -->
                <div class="level-container">
                    <h2>Level 1: Vowels</h2>
                    <div class="progress-bar">
                        <div class="progress" id="vowelsProgress"></div>
                    </div>
                    <button class="level-button" onclick="startLevel('vowels')" id="vowelsButton">
                        Start Vowels
                    </button>
                </div>
                
                <div class="level-connector"></div>
                
                <!-- Level 2: Consonants -->
                <div class="level-container locked" id="consonantsContainer">
                    <h2>Level 2: Consonants</h2>
                    <div class="progress-bar">
                        <div class="progress" id="consonantsProgress"></div>
                    </div>
                    <button class="level-button" onclick="startLevel('consonants')" id="consonantsButton" disabled>
                        Locked
                    </button>
                </div>
                
                <div class="level-connector"></div>
                
                <!-- Level 3: Numbers -->
                <div class="level-container locked" id="numbersContainer">
                    <h2>Level 3: Numbers</h2>
                    <div class="progress-bar">
                        <div class="progress" id="numbersProgress"></div>
                    </div>
                    <button class="level-button" onclick="startLevel('numbers')" id="numbersButton" disabled>
                        Locked
                    </button>
                </div>
            </div>
        </div>
    </div>
    <script src="letters.js"></script>
    <script>
        // Menu functionality
        const menuButton = document.getElementById('menuButton');
        const closeMenu = document.getElementById('closeMenu');
        const sideMenu = document.getElementById('sideMenu');
        const menuOverlay = document.getElementById('menuOverlay');

        function openMenu() {
            sideMenu.classList.add('open');
            menuOverlay.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeMenuHandler() {
            sideMenu.classList.remove('open');
            menuOverlay.classList.remove('active');
            document.body.style.overflow = '';
        }

        menuButton.addEventListener('click', openMenu);
        closeMenu.addEventListener('click', closeMenuHandler);
        menuOverlay.addEventListener('click', closeMenuHandler);

        // Learning progress tracking
        const learntLetters = JSON.parse(localStorage.getItem('learntLetters') || '[]');
        const vowels = kannadaLetters.vowels.map(v => v.letter);
        const consonants = kannadaLetters.consonants.map(c => c.letter);
        const numbers = kannadaLetters.numbers.map(n => n.letter);
        
        // Calculate progress for each level
        const vowelsLearned = learntLetters.filter(l => vowels.includes(l)).length;
        const consonantsLearned = learntLetters.filter(l => consonants.includes(l)).length;
        const numbersLearned = learntLetters.filter(l => numbers.includes(l)).length;
        
        // Update progress bars
        const vowelsProgress = document.getElementById('vowelsProgress');
        vowelsProgress.style.width = `${(vowelsLearned / vowels.length) * 100}%`;
        
        const consonantsProgress = document.getElementById('consonantsProgress');
        consonantsProgress.style.width = `${(consonantsLearned / consonants.length) * 100}%`;
        
        const numbersProgress = document.getElementById('numbersProgress');
        numbersProgress.style.width = `${(numbersLearned / numbers.length) * 100}%`;
        
        // Check level unlocks
        const consonantsContainer = document.getElementById('consonantsContainer');
        const consonantsButton = document.getElementById('consonantsButton');
        const numbersContainer = document.getElementById('numbersContainer');
        const numbersButton = document.getElementById('numbersButton');
        
        // Unlock consonants if vowels are completed
        if (vowelsLearned === vowels.length) {
            consonantsContainer.classList.remove('locked');
            consonantsButton.disabled = false;
            consonantsButton.textContent = 'Start Consonants';
        }
        
        // Unlock numbers if consonants are completed
        if (consonantsLearned === consonants.length) {
            numbersContainer.classList.remove('locked');
            numbersButton.disabled = false;
            numbersButton.textContent = 'Start Numbers';
        }
        
        function startLevel(level) {
            localStorage.setItem('currentLevel', level);
            window.location.href = 'practice.html?mode=learn';
        }
    </script>
</body>
</html>